<!-- On va dériver la layout.html de base -->
{% extends "admin_layout.html" %}


{% block javascript %}    <!-- Début du block javascript -->
{% endblock %}  <!-- Fin du block javascript -->


{% block body %}    <!-- Début du block body -->


<!-- Bandeau pour erreurs et notifications -->
<div class="row">
    <div class="col-lg-12">
        <div id="admin_erreur">
            {% for category, message in get_flashed_messages(with_categories=true) %}
            <div class="alert alert-{{ category }}" role="alert">{{ message }}</div>
            {% endfor %}
        </div>
    </div>
</div><!-- row -->

<!-- Contenu de la page -->
<div class="row">
  <h1>Etape #7 :: Exportation PDF</h1>
</div><!-- row -->


<!-- Liste des courses -->
<div class="row">
  <h3>Procédure</h3>
</div>
<div class="row">
  <p class="font-italic">Afin de pouvoir partager les résultats de la course, il faut procéder en 3 temps :
    <ol>
      <li>
        <strong>Exporter</strong> les résultats de la course en cliquant sur le bouton <button class="btn btn-success btn-sm" disabled><i class="fas fa-file-export"></i> Exporter</button>.
         Le public pourra ensuite télécharger et consulter le fichier PDF exporté
       </li>
      <li>
        <strong>Vérifier</strong> que l'exportation s'est bien déroulée et que le fichier
        <a href="{{ url_for('telecharger_fichier_pdf', filename='resultats_course.pdf') }}">
          <button class="btn btn-primary"><i class="fas fa-file-pdf"></i> resultats_course.pdf</button>
        </a> est correct avant de passer à l'étape suivante
      </li>
      <li>
        <strong>Archiver</strong> la course en cliquant sur le bouton <button class="btn btn-warning btn-sm" disabled><i class="fas fa-database"></i> Archiver</button>
      . Attention, cette action efface tous les coureurs et leurs passages de la base de données.
      </li>
      <li>
        <strong>Partager</strong> les résultats de la course archivée à l'aide d'un QR code en cliquant sur le bouton
        <button class="btn btn-primary btn-sm" disabled><i class="fas fa-step-forward"></i> Etape #8</button>
      </li>
    </ol>
  </p>
</div>
<br />

<div class="row">
  <h3>Liste des courses</h3>
</div>
<div class="row">
  <p class="font-italic">Liste des courses dans la base de données.</p>
  <table class="table table-striped">
    <thead><tr><th>ID</th><th>Date</th><th>Nom</th><th>Active</th><th>Archive</th><th>Coureurs</th><th>Passages</th><th>Actions</th></tr></thead>
    <tbody>
    {% if les_courses %}
      {% for une_course in les_courses %}
        <tr>
          <td>{{ une_course[0] }}</td><!-- id -->
          <td>{{ une_course[1] }}</td><!-- date -->
          <td>{{ une_course[2] }}</td><!-- nom -->
          {% if une_course[3] == 0 %}
            <td><i class="far fa-square"></i></td><!-- active -->
          {% else %}
            <td><i class="far fa-check-square"></i></td><!-- active -->
          {% endif %}
          {% if une_course[4] == 0 %}
            <td><i class="fas fa-lock-open"></i></td><!-- archive -->
          {% else %}
            <td><i class="fas fa-lock"></i></td><!-- archive -->
          {% endif %}
          <td>{{ une_course[5] }}</td><!-- nb coureurs -->
          <td>{{ une_course[6] }}</td><!-- nb passages -->
          <td>
          {% if une_course[4] == 1 %}
            <button class="btn btn-success btn-sm" disabled><i class="fas fa-file-export"></i> Exporter</button>
            <button class="btn btn-warning btn-sm" disabled><i class="fas fa-database"></i> Archiver</button>
          {% else %}
            <a href="{{ url_for('administrer_courses_exporter', id_course=une_course[0]) }}">
              <button class="btn btn-success btn-sm"><i class="fas fa-file-export"></i> Exporter</button>
            </a>
            <a href="{{ url_for('administrer_courses_archiver', id_course=une_course[0]) }}">
              <button class="btn btn-warning btn-sm"><i class="fas fa-database"></i> Archiver</button>
            </a>
          {% endif %}

          </td>
        </tr>
      {% endfor %}
    {% endif %}
    </tbody>
  </table>
</div><!-- row -->
<br />


<!-- Les boutons étapes suivante et précédente -->
<div class="row">
  <div class="col-sm">
    <a href="{{ url_for('administrer_tutoriel_etape6') }}">
      <button class="btn btn-primary btn-sm"><i class="fas fa-step-backward"></i> Etape #6</button>
    </a>
  </div><!-- col -->
  <div class="col-sm">
    <a href="{{ url_for('administrer_tutoriel_etape8') }}">
      <button class="btn btn-primary btn-sm"><i class="fas fa-step-forward"></i> Etape #8</button>
    </a>
  </div><!-- col -->
</div><!-- row -->




{% endblock %}  <!-- Fin du block body -->
