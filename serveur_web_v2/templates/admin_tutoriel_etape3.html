<!-- On va dériver la layout.html de base -->
{% extends "admin_layout.html" %}


{% block javascript %}    <!-- Début du block javascript -->
{% endblock %}  <!-- Fin du block javascript -->


{% block body %}    <!-- Début du block body -->


<!-- Bandeau pour erreurs et notifications -->
<div class="row">
    <div class="col-lg-12">
        <div id="admin_erreur">
            {% for category, message in get_flashed_messages(with_categories=true) %}
            <div class="alert alert-{{ category }}" role="alert">{{ message }}</div>
            {% endfor %}
        </div>
    </div>
</div><!-- row -->

<!-- Titre de la page -->
<div class="row">
  <h1>Etape #3 :: Importation des badges</h1>
</div>


<!-- Fomulaire pour le téléversement et l'importation du fichier CSV -->
<form action="{{ url_for('administrer_coureurs_importer') }}" method="post" enctype="multipart/form-data">
  <fieldset>

    <!-- Zone pour vérifier l'id de la course active -->
    <div class="row">
      <h3>Course active</h3>
    </div>
    <div class="form-group">
      <div class="row">
        <p class="font-italic">La course dans laquelle seront importés les coureurs. Ce choix a été effectué à l'étape précédente</p>
        <table class="table table-striped">
          <thead><tr><th>ID de la course active</th></tr></thead>
          <tbody>
            {% if session.id_course_active %}
            <tr><td><h2><span class="badge badge-success text_deco"> {{ session.id_course_active }} </span></h2></td></tr>
            {% else %}
            <tr><td><h2><span class="badge badge-danger text_deco"> ??? </span></h2></td></tr>
            {% endif %}
          </tbody>
        </table>
      </div><!-- row -->
    </div><!-- form-group -->  


    <!-- Zone pour choisir et téléverser le fichier CSV -->
    <div class="row">
      <h3>Choix et format du fichier CSV</h3>
    </div>
    <div class="form-group">
      <div class="row">
        <div class="col">
          <p class="font-italic">Le fichier CSV doit avoir les caractéristiques suivantes :
            <ul class="font-italic">
              <li>4 colonnes (nom, prenom, classe, code-barre)</li>
              <li>caractère séparateur = ;</li>
              <li>attention encodage UTF-8 obligatoire</li>
              <li>attention aux éventuels accents (Ï, Ë, Â...)</li>
              <li>pas de première ligne avec les en-têtes des colonnes</li>
            </ul>
          </p>
        </div><!-- col -->
        <div class="col">
          <p class="font-italic">Exemple :
        <pre><code>
  CHOPOTEAU;LEO;AM1;1234567
  TITTEGOUTTE;JUSTINE;SNIR2;9876543
  SHOWKANAPE;OPHELIE;PERSONNEL;4352617
        </code></pre>
          </p>
        </div><!-- col -->
      </div><!-- row -->
      <input type="file" class="form-control-file" name="fichier_csv" id="exampleFormControlFile1">
    </div><!-- form-group -->
    <br />


    <!-- Zone pour téléverser le fichier CSV et importer les données dans la bdd-->
    <div class="row">
      <h3>Téléversement et importation du fichier CSV</h3>
    </div>
    <p class="font-italic">Une fois toutes les vérifications effectuées, vous pouvez cliquer sur le bouton ci-dessous.<br />
    Soyez patient, selon la taille du fichier CSV, le processus peut durer plusieurs secondes, voire plusieurs minutes
    </p>
    <button type="submit" class="btn btn-primary"><i class="fas fa-cloud-upload-alt"></i> Télécharger et enregistrer</button>
  </fieldset>
</form>
<br /><br />


<!-- Les boutons étapes suivante et précédente -->
<div class="row">
  <div class="col-sm">
    <a href="{{ url_for('administrer_tutoriel_etape2') }}">
      <button class="btn btn-primary btn-sm"><i class="fas fa-step-backward"></i> Etape #2</button>
    </a>
  </div><!-- col -->
  <div class="col-sm text_right">
    <a href="{{ url_for('administrer_tutoriel_etape4') }}">
      <button class="btn btn-primary btn-sm"><i class="fas fa-step-forward"></i> Etape #4</button>
    </a>
  </div><!-- col -->
</div><!-- row -->



{% endblock %}  <!-- Fin du block body -->
